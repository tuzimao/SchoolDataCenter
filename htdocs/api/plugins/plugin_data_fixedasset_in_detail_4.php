<?php

//FlowName: 采购入库

function plugin_data_fixedasset_in_detail_4_init_default()  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_init_default_filter_RS($RS)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code

    return $RS;
}

function plugin_data_fixedasset_in_detail_4_add_default_data_before_submit()  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_add_default_data_after_submit($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
    /*
    $sql        = "select * from `$TableName` where id = '$id'";
    $rs         = $db->Execute($sql);
    $rs_a       = $rs->GetArray();
    foreach($rs_a as $Line)  {
        //
    }
    */
}

function plugin_data_fixedasset_in_detail_4_edit_default($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_edit_default_data_before_submit($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_edit_default_data_after_submit($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
    require_once('../workflow/plugins_fixedasset.php');

    $sql        = "select * from data_fixedasset_in_detail where id='$id'";
    $rs         = $db->Execute($sql);
    $采购状态    = $rs->fields['采购状态'];
    $供应商名称  = $rs->fields['供应商名称'];
    $sql = "select * from data_fixedasset_provider where 供应商名称='".$供应商名称."'";
    $rsT = $db->Execute($sql);
    $供应商联系人    = $rsT->fields['供应商联系人'];
    $供应商联系方式  = $rsT->fields['供应商联系方式'];
    $供应商网站      = $rsT->fields['供应商网站'];
    $sql = "update data_fixedasset_in_detail set 供应商联系人='$供应商联系人', 供应商联系方式='$供应商联系方式', 供应商网站='$供应商网站' where id='$id'";
    $db->Execute($sql);

    if($采购状态 == "资产入库")  {
        固定资产_采购明细记录_转_入库($id);
    }

}

function plugin_data_fixedasset_in_detail_4_edit_default_configsetting_data($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
    /*
    $sql        = "select * from `$TableName` where id = '$id'";
    $rs         = $db->Execute($sql);
    $rs_a       = $rs->GetArray();
    foreach($rs_a as $Line)  {
        //
    }
    */
}

function plugin_data_fixedasset_in_detail_4_view_default($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_delete_array($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_updateone($id)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

function plugin_data_fixedasset_in_detail_4_import_default_data_before_submit($Element)  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
    return $Element;
}

function plugin_data_fixedasset_in_detail_4_import_default_data_after_submit()  {
    global $db;
    global $SettingMap;
    global $MetaColumnNames;
    global $GLOBAL_USER;
    global $TableName;
    //Here is your write code
}

?>
